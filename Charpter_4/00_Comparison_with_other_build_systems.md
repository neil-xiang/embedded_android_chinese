> 翻译：[neil-xiang](https://github.com/neil-xiang)
> 校对：

	上一章的目标是通过自定义AOSP开发尽可能快地开始运行。此时您无需关闭本书，也可以开始挖掘和修改您的AOSP树，以满足您的需求。所有您需要做的测试您的修改是重建AOSP，
再次启动模拟器，如果需要，使用ADB将其重新启动。但是，如果您希望最大化您的努力，您可能需要深入了解Android的构建系统。
	尽管它的模块化，Android的构建系统是相当复杂的，不像任何主流的构建系统在那里;至少主流的系统没有一个用于开源项目。具体来说，它以相当非常规的方式使用make，并且
不提供任何类型的基于菜单配置的配置（或等同于此）。Android非常有自己的构建模式，需要一些时间来习惯。所以准备一两杯好咖啡-事情要变得严肃起来了。
		**像AOSP的其余部分一样，构建系统是一个移动目标。所以在以下信息长时间保持有效时，您应该注意AOSP版本中使用的更改。
## 与其他构建系统的比较(Comparison with Other Build Systems)
	在开始解释Android构建系统的工作原理之前，首先要强调与Android应用程序的不同之处。首先，与大多数基于make的构建系统不同，Android构建系统不依赖递归makefile。例如，
与Linux内核不同，没有顶级的makefile将递归地调用子目录的makefile。相反，有一个脚本可以探索所有目录和子目录，直到找到一个Android.mk文件，然后停止它，并且不会浏览
该文件位置下的子目录，除非Android.mk找到指示构建系统。请注意，Android不依赖Makefile文件。相反，它是指定如何构建本地“模块”的Android.mk文件。
		
		**Android构建“模块”与内核“模块”无关。在Android构建系统的上下文中，“模块”是需要构建的AOSP的任何组件。这可能是二进制文件，应用程序包，库文件等。并且它可能必须
			为目标或主机构建，但它仍然是构建系统的“模块”。
				多少个构建模块？
			只是为了让您了解AOSP可以构建多少个模块，请尝试在树中运行此命令：
				$ find . -name Android.mk | wc -l
			这将查找所有Android.mk文件，并计算有多少。在Android2.3/Gingerbread中有1143个，在Adroid4.2/Jelly Bean中是2037个。
			
			
	另一种Android特性是构建系统的配置方式。虽然我们大多数人习惯于基于内核式menuconfig或GNU autotools（即autoconf，automake等）的系统，Android依赖于一组变量，这些变量
可以通过'envsetup.sh'和'lunch'来动态设置为shell环境的一部分，或者在buildspec.mk文件中静态提前定义。对于新手来说，这似乎也是一个惊喜 - Android的构建系统的可配置性水
平相当有限。因此，当您可以指定要为其构建AOSP的目标的属性时，在一定程度上，在最终的AOSP中默认应包含哪些应用程序，没有办法让您启用或禁用大多数功能，因为可能 menuconfig。
例如，您不能决定您不希望电源管理支持，或者您不希望位置服务默认启动。
	此外，构建系统不会在与源文件相同的位置生成对象文件或任何类型的中间输出。例如，您不会在.c源文件中树中找到.o文件。实际上，任何一个输出都没有使用现有的AOSP目录。相反，
构建系统创建一个out/目录，它存储它生成的所有东西。因此，make clean与rm -rf out/非常相似。换句话说，删除out/目录会擦除任何已构建的内容。
	我们开始更详细地探索之前关于构建系统的最后一件事，就是与GNU make有很大关联。更确切的说是3.81版；即使是最新的3.82版如果不更新的话也无法和大多数的AOSP版本工作。实际
上，构建系统很大程度上依赖于许多GNU特定于特定的功能，如define，include和ifndef指令。




